# Настройка GitHub Secrets для анонсов игр

## Необходимые секреты

Для автоматического запуска анонсов игр каждый день в 10:00 МСК необходимо настроить следующие секреты в GitHub:

### Как добавить секреты:

1. Перейдите в ваш репозиторий на GitHub
2. Нажмите **Settings** → **Secrets and variables** → **Actions**
3. Нажмите **New repository secret** для каждого секрета

### Список секретов:

#### 1. BOT_TOKEN
- **Название**: `BOT_TOKEN`
- **Значение**: Токен вашего Telegram бота (получен от @BotFather)
- **Пример**: `1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789`

#### 2. CHAT_ID
- **Название**: `CHAT_ID`
- **Значение**: ID чата/группы для отправки анонсов
- **Пример**: `-15573582`

#### 3. GAMES_TOPIC_ID
- **Название**: `GAMES_TOPIC_ID`
- **Значение**: ID топика для опросов по играм
- **Пример**: `1282`
- **По умолчанию**: `1282` (если не указан)

#### 4. TARGET_TEAMS
- **Название**: `TARGET_TEAMS`
- **Значение**: Список команд для мониторинга (через запятую)
- **Пример**: `PullUP,Pull Up-Фарм`
- **По умолчанию**: `PullUP,Pull Up-Фарм` (если не указан)

## Расписание запуска

GitHub Actions настроен на запуск:

### 1. Создание опросов по играм
- **Время**: Каждый день в 9:00 по московскому времени (6:00 UTC)
- **Workflow**: `Game Polls Creator`
- **Функция**: Создает голосования в топике 1282 для игр PullUP/Pull Up-Фарм

### 2. Анонсы игр
- **Время**: Каждый день в 10:00 по московскому времени (7:00 UTC)
- **Workflow**: `Game Day Announcements`
- **Функция**: Отправляет анонсы игр в основной топик

**Ручной запуск**: Доступен через GitHub Actions → "Run workflow"

## Проверка работы

После настройки секретов:

1. Перейдите в **Actions** в вашем репозитории
2. Найдите workflow "Game Polls Creator" или "Game Day Announcements"
3. Нажмите **Run workflow** для тестового запуска
4. Проверьте логи выполнения

### Проверка опросов:
- Workflow "Game Polls Creator" создает голосования в топике 1282
- Проверьте, что опросы создаются для игр PullUP/Pull Up-Фарм

### Проверка анонсов:
- Workflow "Game Day Announcements" отправляет анонсы в основной топик
- Проверьте, что анонсы приходят в основной чат (без указания топика)

## Логи и артефакты

После каждого запуска сохраняются:

### Для опросов:
- `game_polls_history.json` - история созданных опросов
- Логи выполнения скрипта создания опросов

### Для анонсов:
- `game_day_announcements.json` - история отправленных анонсов
- Логи выполнения скрипта анонсов
- Информация об ошибках (если есть)

## Устранение неполадок

### Анонсы не отправляются:
1. Проверьте правильность всех секретов
2. Убедитесь, что бот добавлен в чат
3. Проверьте права бота в чате
4. Посмотрите логи выполнения в Actions

### Неправильный топик для опросов:
1. Проверьте значение `GAMES_TOPIC_ID`
2. Убедитесь, что топик 1282 существует
3. Проверьте права бота в топике

### Анонсы не в основном топике:
1. Анонсы должны приходить в основной чат (без указания топика)
2. Проверьте, что в коде не указан `message_thread_id`

### Не находит игры:
1. Проверьте значение `TARGET_TEAMS`
2. Убедитесь, что команды указаны правильно
3. Проверьте доступность сайта letobasket.ru
