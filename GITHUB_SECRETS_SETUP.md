# Настройка GitHub Secrets для анонсов игр

## Необходимые секреты

Для автоматического запуска анонсов игр каждый день в 10:00 МСК необходимо настроить следующие секреты в GitHub:

### Как добавить секреты:

1. Перейдите в ваш репозиторий на GitHub
2. Нажмите **Settings** → **Secrets and variables** → **Actions**
3. Нажмите **New repository secret** для каждого секрета

### Список секретов:

#### 1. BOT_TOKEN
- **Название**: `BOT_TOKEN`
- **Значение**: Токен вашего Telegram бота (получен от @BotFather)
- **Пример**: `1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789`

#### 2. CHAT_ID
- **Название**: `CHAT_ID`
- **Значение**: ID чата/группы для отправки анонсов
- **Пример**: `-15573582`

#### 3. GAMES_TOPIC_ID
- **Название**: `GAMES_TOPIC_ID`
- **Значение**: ID топика для опросов по играм
- **Пример**: `1282`
- **По умолчанию**: `1282` (если не указан)

#### 4. TARGET_TEAMS
- **Название**: `TARGET_TEAMS`
- **Значение**: Список команд для мониторинга (через запятую)
- **Пример**: `PullUP,Pull Up-Фарм`
- **По умолчанию**: `PullUP,Pull Up-Фарм` (если не указан)

## Расписание запуска

GitHub Actions настроен на запуск:

### Единая система управления играми
- **Время**: Каждый день в 10:00 по московскому времени (7:00 UTC)
- **Workflow**: `Game System Manager`
- **Функция**: Выполняет последовательно:
  1. Парсинг расписания игр
  2. Создание голосований в топике 1282 (если еще не созданы)
  3. Отправка анонсов игр в основной топик (если игра сегодня)

**Ручной запуск**: Доступен через GitHub Actions → "Run workflow"

## Проверка работы

После настройки секретов:

1. Перейдите в **Actions** в вашем репозитории
2. Найдите workflow "Game System Manager"
3. Нажмите **Run workflow** для тестового запуска
4. Проверьте логи выполнения

### Проверка системы:
- Workflow выполняет все 3 процесса последовательно
- Опросы создаются в топике 1282 (если еще не созданы)
- Анонсы отправляются в основной топик (если игра сегодня)
- Система предотвращает дублирование опросов и анонсов

## Логи и артефакты

После каждого запуска сохраняются:

### Для опросов:
- `game_polls_history.json` - история созданных опросов
- Логи выполнения скрипта создания опросов

### Для анонсов:
- `game_day_announcements.json` - история отправленных анонсов
- Логи выполнения скрипта анонсов
- Информация об ошибках (если есть)

## Устранение неполадок

### Анонсы не отправляются:
1. Проверьте правильность всех секретов
2. Убедитесь, что бот добавлен в чат
3. Проверьте права бота в чате
4. Посмотрите логи выполнения в Actions

### Неправильный топик для опросов:
1. Проверьте значение `GAMES_TOPIC_ID`
2. Убедитесь, что топик 1282 существует
3. Проверьте права бота в топике

### Анонсы не в основном топике:
1. Анонсы должны приходить в основной чат (без указания топика)
2. Проверьте, что в коде не указан `message_thread_id`

### Не находит игры:
1. Проверьте значение `TARGET_TEAMS`
2. Убедитесь, что команды указаны правильно
3. Проверьте доступность сайта letobasket.ru
