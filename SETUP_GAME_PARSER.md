# üèÄ –û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä –∏–≥—Ä (game_parser.py)

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

`game_parser.py` - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏–≥—Ä –∏ —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏. –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### `get_fresh_page_content()`
–ü–æ–ª—É—á–∞–µ—Ç —Å–≤–µ–∂–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã letobasket.ru —Å –æ–±—Ö–æ–¥–æ–º –∫–µ—à–∞.

```python
html_content = await game_parser.get_fresh_page_content()
```

#### `extract_current_date(page_text)`
–ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∏–∑ —Ç–µ–∫—Å—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

```python
current_date = game_parser.extract_current_date(page_text)
```

#### `check_finished_games(html_content, current_date)`
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã PullUP –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

```python
finished_games = game_parser.check_finished_games(html_content, current_date)
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∏–≥—Ä–∞—Ö:
```python
[
    {
        'pullup_team': 'Pull Up',
        'opponent_team': 'Garde Marine',
        'pullup_score': 92,
        'opponent_score': 46,
        'date': '17.08.2025',
        'game_link': 'http://letobasket.ru/...'
    }
]
```

#### `extract_finished_game_info(row, html_content, current_date)`
–ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π –∏–≥—Ä–µ –∏–∑ —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã.

```python
game_info = game_parser.extract_finished_game_info(row, html_content, current_date)
```

#### `parse_game_info(game_url)`
–ü–∞—Ä—Å–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–≥—Ä–µ —Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–≥—Ä—ã.

```python
game_info = await game_parser.parse_game_info(game_url)
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –°–ª–æ–≤–∞—Ä—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–≥—Ä–µ:
```python
{
    'time': '20.08.2025 20:30',
    'team1': 'Pull Up',
    'team2': '–ö–∏—Ä–ø–∏—á–Ω—ã–π –ó–∞–≤–æ–¥'
}
```

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è
```python
from game_parser import game_parser
```

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```python
# –ü–æ–ª—É—á–∞–µ–º —Å–≤–µ–∂–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
html_content = await game_parser.get_fresh_page_content()

# –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞—Ç—É
page_text = soup.get_text()
current_date = game_parser.extract_current_date(page_text)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
finished_games = game_parser.check_finished_games(html_content, current_date)

# –ü–∞—Ä—Å–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–≥—Ä–µ
game_info = await game_parser.parse_game_info(game_url)
```

## üîç –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∏–≥—Ä

–ò–≥—Ä–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π, –µ—Å–ª–∏:
1. **–ê—Ç—Ä–∏–±—É—Ç—ã HTML**: `js-period='4'` –∏ `js-timer='0:00'`
2. **–¢–µ–∫—Å—Ç**: —Å–æ–¥–µ—Ä–∂–∏—Ç "4—á" –∏–ª–∏ "4 —á"
3. **–°—á–µ—Ç**: –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–Ω—ã–π —Å—á–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ "NN:NN"

## üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ –º–µ—Ç–æ–¥—ã –≤–∫–ª—é—á–∞—é—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `None` –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:
- –û—à–∏–±–∫–∏ —Å–µ—Ç–∏
- –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Python:
```python
import logging
logger = logging.getLogger(__name__)
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏

### –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:
- `game_results_monitor.py` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–≥—Ä
- `pullup_notifications.py` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è PullUP
- `birthday_bot.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
- `letobasket_monitor.py` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ letobasket.ru

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `aiohttp` - HTTP-–∫–ª–∏–µ–Ω—Ç
- `beautifulsoup4` - –ø–∞—Ä—Å–∏–Ω–≥ HTML
- `re` - —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç –ø–∞—Ä—Å–µ—Ä–∞ –∏–≥—Ä
python tests/test_game_results_monitor.py

# –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä—Å–µ—Ä)
python tests/test_notifications.py
```

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏

- ‚úÖ **–ï–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞**: –í—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚úÖ **–õ–µ–≥–∫–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- ‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –û–¥–∏–Ω–∞–∫–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: –ú–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
