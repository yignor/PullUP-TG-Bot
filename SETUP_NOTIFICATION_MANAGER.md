# üì¢ –û–±—â–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (notification_manager.py)

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

`notification_manager.py` - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏. –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### `send_game_end_notification(game_info, game_url)`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–≥—Ä—ã.

```python
await notification_manager.send_game_end_notification(game_info, game_url)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `game_info` - —Å–ª–æ–≤–∞—Ä—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–≥—Ä–µ
- `game_url` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–≥—Ä—É

#### `send_game_start_notification(game_info, game_url)`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∞—á–∞–ª–µ –∏–≥—Ä—ã.

```python
await notification_manager.send_game_start_notification(game_info, game_url)
```

#### `send_game_result_notification(game_info, poll_results=None)`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏–≥—Ä—ã —Å –∞–Ω–∞–ª–∏–∑–æ–º –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π.

```python
await notification_manager.send_game_result_notification(game_info, poll_results)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `game_info` - —Å–ª–æ–≤–∞—Ä—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–≥—Ä–µ
- `poll_results` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### `send_morning_notification(games, date)`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É—Ç—Ä–µ–Ω–Ω–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –∏–≥—Ä–∞—Ö.

```python
await notification_manager.send_morning_notification(games, date)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `games` - —Å–ø–∏—Å–æ–∫ –∏–≥—Ä
- `date` - –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ 'YYYY-MM-DD'

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

–ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- `sent_game_end_notifications` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–≥—Ä
- `sent_game_start_notifications` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞—á–∞–ª–µ –∏–≥—Ä  
- `sent_game_result_notifications` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
- `sent_morning_notifications` - —É—Ç—Ä–µ–Ω–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã:
- **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã**: `game_end_{date}_{opponent_team}`
- **–ù–∞—á–∞–ª–æ –∏–≥—Ä—ã**: `game_start_{game_url}`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç –∏–≥—Ä—ã**: `game_result_{date}_{opponent_team}`
- **–£—Ç—Ä–µ–Ω–Ω–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**: `morning_{date}`

## üìä –§–æ—Ä–º–∞—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–≥—Ä—ã
```
üèÄ –ò–≥—Ä–∞ –ø—Ä–æ—Ç–∏–≤ Garde Marine –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å
üèÜ –°—á–µ—Ç: Pull Up 92 : 46 Garde Marine (–ø–æ–±–µ–¥–∏–ª–∏)
üìÖ –î–∞—Ç–∞: 17.08.2025
üìä –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª: [—Ç—É—Ç](http://letobasket.ru/...)
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è–º–∏
```
üèÄ –ò–≥—Ä–∞ –ø—Ä–æ—Ç–∏–≤ –ö–∏—Ä–ø–∏—á–Ω—ã–π –ó–∞–≤–æ–¥ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å
üèÜ –°—á–µ—Ç: Pull Up 78 : 56 –ö–∏—Ä–ø–∏—á–Ω—ã–π –ó–∞–≤–æ–¥ (–ø–æ–±–µ–¥–∏–ª–∏)

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è:
‚úÖ –ì–æ—Ç–æ–≤—ã: 8
‚ùå –ù–µ –≥–æ—Ç–æ–≤—ã: 2
üë®‚Äçüè´ –¢—Ä–µ–Ω–µ—Ä: 1
üìà –í—Å–µ–≥–æ –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª–æ: 11
üéØ –û—Ç–ª–∏—á–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å! (72.7%)

üìÖ –î–∞—Ç–∞: 20.08.2025
```

### –£—Ç—Ä–µ–Ω–Ω–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```
üèÄ –°–µ–≥–æ–¥–Ω—è –∏–≥—Ä–∞ –ø—Ä–æ—Ç–∏–≤ IT Basket
‚è∞ –í—Ä–µ–º—è –∏–≥—Ä—ã: 12.30
üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –∏–≥—Ä—É: [—Ç—É—Ç](http://letobasket.ru/...)

üèÄ –°–µ–≥–æ–¥–Ω—è –∏–≥—Ä–∞ –ø—Ä–æ—Ç–∏–≤ –ú–∞–∏–ª–µ –ö–∞—Ä–≥–æ
‚è∞ –í—Ä–µ–º—è –∏–≥—Ä—ã: 14.00
üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –∏–≥—Ä—É: [—Ç—É—Ç](http://letobasket.ru/...)
```

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è
```python
from notification_manager import notification_manager
```

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```python
# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–≥—Ä—ã
game_info = {
    'pullup_team': 'Pull Up',
    'opponent_team': 'Garde Marine',
    'pullup_score': 92,
    'opponent_score': 46,
    'date': '17.08.2025'
}
await notification_manager.send_game_end_notification(game_info, game_url)

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è–º–∏
poll_results = {
    'votes': {
        'ready': 8,
        'not_ready': 2,
        'coach': 1,
        'total': 11
    }
}
await notification_manager.send_game_result_notification(game_info, poll_results)
```

## üîç –ê–Ω–∞–ª–∏–∑ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –º–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã:

- **üéØ –û—Ç–ª–∏—á–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** (‚â•80%): –û—Ç–ª–∏—á–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã
- **üëç –•–æ—Ä–æ—à–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** (60-79%): –•–æ—Ä–æ—à–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã
- **‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** (40-59%): –°—Ä–µ–¥–Ω—è—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã
- **üòï –ù–∏–∑–∫–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** (<40%): –ù–∏–∑–∫–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

### –û—á–∏—Å—Ç–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
```python
notification_manager.clear_notifications()
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª–æ –ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
notification_id = f"game_end_{date}_{opponent_team}"
if notification_id in notification_manager.sent_game_end_notifications:
    print("–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ")
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏

### –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:
- `game_results_monitor.py` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–≥—Ä
- `pullup_notifications.py` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è PullUP
- `birthday_bot.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
- `letobasket_monitor.py` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ letobasket.ru

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `telegram` - Telegram Bot API
- `os` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `logging` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
python tests/test_notifications.py

# –¢–µ—Å—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–≥—Ä
python tests/test_game_results_monitor.py

# –§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç
python tests/final_test.py
```

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏

- ‚úÖ **–ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç**: –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Å—Ç–∏–ª—å
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
- ‚úÖ **–õ–µ–≥–∫–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- ‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –û–¥–∏–Ω–∞–∫–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö
- ‚úÖ **–ê–Ω–∞–ª–∏–∑ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: –ú–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
BOT_TOKEN=your_telegram_bot_token
CHAT_ID=your_chat_id
```

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
–ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ:
```python
from notification_manager import notification_manager
# notification_manager –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
```
