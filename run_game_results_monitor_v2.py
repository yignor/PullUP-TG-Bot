#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–≥—Ä (–≤–µ—Ä—Å–∏—è 2) –≤ GitHub Actions
–ü—Ä—è–º–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–æ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç GameSystemManager
"""

import asyncio
from game_results_monitor_v2 import run_game_results_monitor_v2

async def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–≥—Ä"""
    print("üèÄ –ó–ê–ü–£–°–ö –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê –†–ï–ó–£–õ–¨–¢–ê–¢–û–í –ò–ì–† (–í–ï–†–°–ò–Ø 2)")
    print("=" * 60)
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
    from datetime_utils import get_moscow_time
    now = get_moscow_time()
    print(f"üïê –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è (–ú–æ—Å–∫–≤–∞): {now.strftime('%d.%m.%Y %H:%M:%S')}")
    print(f"üîÑ Workflow –∑–∞–ø—É—â–µ–Ω: {now.strftime('%H:%M:%S')}")
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏
    weekday = now.weekday()  # 0=–ü–Ω, 1=–í—Ç, ..., 6=–í—Å
    hour = now.hour
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏
    if weekday < 5:  # –ü–Ω-–ü—Ç (0-4)
        day_type = "–±—É–¥–Ω–∏"
        if 18 <= hour <= 23 or hour == 0:
            print(f"üìÖ –†–µ–∂–∏–º: {day_type} (–∑–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç, 18:00-01:00)")
        else:
            print(f"üìÖ –†–µ–∂–∏–º: {day_type} (–Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –≤—Ä–µ–º—è)")
    else:  # –°–±-–í—Å (5-6)
        day_type = "–≤—ã—Ö–æ–¥–Ω—ã–µ"
        if 11 <= hour <= 23 or hour == 0:
            print(f"üìÖ –†–µ–∂–∏–º: {day_type} (–∑–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç, 11:00-01:00)")
        else:
            print(f"üìÖ –†–µ–∂–∏–º: {day_type} (–Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –≤—Ä–µ–º—è)")
    
    try:
        # –ó–∞–ø—É—Å–∫–∞–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
        await run_game_results_monitor_v2()
        
        print("=" * 60)
        print("‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω")
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: {e}")
        raise

if __name__ == "__main__":
    asyncio.run(main())
