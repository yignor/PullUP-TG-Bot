#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–æ–¥–∞–∫—à–Ω –∏ —Ç–µ—Å—Ç —á–∞—Ç–æ–≤
"""

import asyncio
import os
from dotenv import load_dotenv
from telegram import Bot

async def test_both_with_correct_settings():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –æ–±–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏"""
    print("\n=== –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –° –ü–†–ê–í–ò–õ–¨–ù–´–ú–ò –ù–ê–°–¢–†–û–ô–ö–ê–ú–ò ===\n")
    
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    try:
        load_dotenv()
        print("‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã")
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: {e}")
        return
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    bot_token = "7772125141:AAHqFYGm3I6MW516aCq3K0FFjK2EGKk0wtw"
    
    # –ü—Ä–æ–¥–∞–∫—à–Ω —á–∞—Ç
    prod_chat_id = "-1001535261616"
    
    # –¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç  
    test_chat_id = "-15573582"
    
    print(f"‚úÖ BOT_TOKEN: {bot_token[:10]}...")
    print(f"üè≠ –ü–†–û–î–ê–ö–®–ù CHAT_ID: {prod_chat_id}")
    print(f"üß™ –¢–ï–°–¢–û–í–´–ô CHAT_ID: {test_chat_id}")
    
    try:
        # –°–æ–∑–¥–∞–µ–º –±–æ—Ç–∞
        bot = Bot(token=bot_token)
        print("‚úÖ –ë–æ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
        
        # –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —á–∞—Ç
        print(f"\n1. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –ü–†–û–î–ê–ö–®–ù —á–∞—Ç...")
        prod_message = "üè≠ –ü–†–û–î–ê–ö–®–ù –ß–ê–¢\n\n–≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —á–∞—Ç.\n–í—Ä–µ–º—è: " + str(asyncio.get_event_loop().time())
        
        await bot.send_message(chat_id=prod_chat_id, text=prod_message)
        print("‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –ü–†–û–î–ê–ö–®–ù —á–∞—Ç!")
        
        # –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç
        print(f"\n2. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –¢–ï–°–¢–û–í–´–ô —á–∞—Ç...")
        test_message = "üß™ –¢–ï–°–¢–û–í–´–ô –ß–ê–¢\n\n–≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Ç–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç.\n–í—Ä–µ–º—è: " + str(asyncio.get_event_loop().time())
        
        await bot.send_message(chat_id=test_chat_id, text=test_message)
        print("‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –¢–ï–°–¢–û–í–´–ô —á–∞—Ç!")
        
        # –¢–µ—Å—Ç–æ–≤—ã–µ –æ–ø—Ä–æ—Å—ã
        print(f"\n3. –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–æ–≤ –≤ –æ–±–∞ —á–∞—Ç–∞...")
        
        # –û–ø—Ä–æ—Å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —á–∞—Ç
        prod_question = "üè≠ –ü—Ä–æ–¥–∞–∫—à–Ω —á–∞—Ç"
        prod_options = [
            "‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç",
            "‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç",
            "‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏"
        ]
        
        prod_poll = await bot.send_poll(
            chat_id=prod_chat_id,
            question=prod_question,
            options=prod_options,
            allows_multiple_answers=False,
            is_anonymous=False,
            explanation="–¢–µ—Å—Ç–æ–≤—ã–π –æ–ø—Ä–æ—Å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —á–∞—Ç–µ"
        )
        print("‚úÖ –û–ø—Ä–æ—Å —Å–æ–∑–¥–∞–Ω –≤ –ü–†–û–î–ê–ö–®–ù —á–∞—Ç–µ!")
        
        # –û–ø—Ä–æ—Å –≤ —Ç–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç
        test_question = "üß™ –¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç"
        test_options = [
            "‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç",
            "‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç", 
            "‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏"
        ]
        
        test_poll = await bot.send_poll(
            chat_id=test_chat_id,
            question=test_question,
            options=test_options,
            allows_multiple_answers=False,
            is_anonymous=False,
            explanation="–¢–µ—Å—Ç–æ–≤—ã–π –æ–ø—Ä–æ—Å –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —á–∞—Ç–µ"
        )
        print("‚úÖ –û–ø—Ä–æ—Å —Å–æ–∑–¥–∞–Ω –≤ –¢–ï–°–¢–û–í–û–ú —á–∞—Ç–µ!")
        
        print("\n=== –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û ===")
        print("üìã –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±–∞ Telegram —á–∞—Ç–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è")
        print("üè≠ –ü–†–û–î–ê–ö–®–ù —á–∞—Ç: -1001535261616")
        print("üß™ –¢–ï–°–¢–û–í–´–ô —á–∞—Ç: -15573582")
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        import traceback
        traceback.print_exc()

if __name__ == "__main__":
    asyncio.run(test_both_with_correct_settings())
